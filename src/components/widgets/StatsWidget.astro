---
import { useState, useEffect } from 'react';
---

<div id="stats-widget">
  <!-- YouTube Stats -->
  <h3>YouTube Stats</h3>
  <p>Subscribers: <span id="youtube-subscribers">Loading...</span></p>
  <p>Videos: <span id="youtube-videos">Loading...</span></p>
  <p>Views: <span id="youtube-views">Loading...</span></p>

  <!-- Twitter Stats -->
  <h3>Twitter Stats</h3>
  <p>Followers: <span id="twitter-followers">Loading...</span></p>
</div>

<script>
  const fetchYouTubeStats = async () => {
    const apiKey = 'AIzaSyDGi1JBTHwYeIbT_eHTlzafzUDdmP5dKnE';
    const channelId = 'UCwdf1LO9-Wj8qVxxFJdeIUQ';
    const response = await fetch(`https://www.googleapis.com/youtube/v3/channels?part=statistics&id=${channelId}&key=${apiKey}`);
    const data = await response.json();
    return data.items[0].statistics;
  };

  const fetchTwitterFollowers = async () => {
    const bearerToken = 'YOUR_BEARER_TOKEN';  // Replace with your actual Twitter Bearer Token
    const response = await fetch('https://api.twitter.com/2/users/by/username/SpectralHorizon', {
      headers: {
        'Authorization': `Bearer ${bearerToken}`,
      },
    });
    const data = await response.json();
    return data.data.public_metrics.followers_count;
  };

  const updateStats = async () => {
    const youtubeStats = await fetchYouTubeStats();
    const twitterFollowers = await fetchTwitterFollowers();

    document.getElementById('youtube-subscribers').textContent = youtubeStats.subscriberCount;
    document.getElementById('youtube-videos').textContent = youtubeStats.videoCount;
    document.getElementById('youtube-views').textContent = youtubeStats.viewCount;
    document.getElementById('twitter-followers').textContent = twitterFollowers;
  };

  // Call the function to update stats when the page loads
  window.onload = updateStats;
</script>
